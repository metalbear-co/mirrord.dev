{{ if .Site.Params.alertDismissable -}}
  <div id="announcement" data-id="global-alert-{{ md5 .Site.Params.alertText }}" class="fade show text-center text-lg-center alert" role="alert">
    {{ .Site.Params.alertText | safeHTML }}
    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close" onclick="dismissAlert()"></button>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function () {    
      var isAlertDismissed = localStorage.getItem('alertDismissed');
      if (isAlertDismissed) {
        document.getElementById('announcement').style.display = 'none';
      }                                 
    });

    // nice hack to hide the alert on scroll: https://www.w3schools.com/howto/howto_js_navbar_hide_scroll.asp
    var prevScrollpos = window.pageYOffset;
    window.onscroll = function() {
      var currentScrollPos = window.pageYOffset;
      if (prevScrollpos > currentScrollPos) {
        document.getElementById("announcement").style.top = "0";
      } else {
        document.getElementById("announcement").style.top = "-50px";
      }
      prevScrollpos = currentScrollPos;
    }

    function dismissAlert() {      
      document.getElementById('announcement').style.display = 'none';
      
      localStorage.setItem('alertDismissed', 'true');
    }

    
  </script>

{{ else -}}
  <div class="alert alert-primary text-center {{ if .Site.Params.darkMode }}custom-alert-dark{{ end }}" role="alert" style="padding: 15px; margin-bottom: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); color: #000;">
    {{ .Site.Params.alertText | safeHTML }}
  </div>
{{ end -}}
